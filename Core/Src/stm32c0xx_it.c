/* USER CODE BEGIN Header */
/**
  ******************************************************************************
  * @file    stm32c0xx_it.c
  * @brief   Interrupt Service Routines.
  ******************************************************************************
  * @attention
  *
  * Copyright (c) 2024 STMicroelectronics.
  * All rights reserved.
  *
  * This software is licensed under terms that can be found in the LICENSE file
  * in the root directory of this software component.
  * If no LICENSE file comes with this software, it is provided AS-IS.
  *
  ******************************************************************************
  */
/* USER CODE END Header */

/* Includes ------------------------------------------------------------------*/
#include "main.h"
#include "stm32c0xx_it.h"
/* Private includes ----------------------------------------------------------*/
/* USER CODE BEGIN Includes */
/* USER CODE END Includes */

/* Private typedef -----------------------------------------------------------*/
/* USER CODE BEGIN TD */

/* USER CODE END TD */

/* Private define ------------------------------------------------------------*/
/* USER CODE BEGIN PD */
 	 struct fadeFunctionValues {
 		 uint16_t indx; // will be used in program
 		 uint16_t length; // this needs to be the size of your sequence (see next)
 		 uint16_t brightness[512]; // here a sequence of brightnesses is stored 1 step = 10 ms
 	 };
/* USER CODE END PD */

/* Private macro -------------------------------------------------------------*/
/* USER CODE BEGIN PM */

/* USER CODE END PM */

/* Private variables ---------------------------------------------------------*/
/* USER CODE BEGIN PV */
	// uint8_t updown=1; // for DEBUG
	struct fadeFunctionValues outputA = { // this are settings for LED 1 and 2
			.indx = 0,
			//.length = 10,  // EXAMPLE
			//.brightness = {0x000,0x000,0x000,0x000,0x000,0x3FF,0x3FF,0x3FF,0x3FF,0x3FF} // EXAPMLE
			.length = 213, // 234 mHz = 4.274 s
			.brightness = {0x033, 0x033, 0x033, 0x034, 0x036, 0x038, 0x03a, 0x03d, 0x040, 0x043, 0x047, 0x04b, 0x04f, 0x054, 0x05a, 0x05f, 0x065, 0x06c, 0x073, 0x07a, 0x081, 0x089, 0x091, 0x09a, 0x0a2, 0x0ab, 0x0b5, 0x0be, 0x0c8, 0x0d2, 0x0dd, 0x0e8, 0x0f3, 0x0fe, 0x109, 0x115, 0x121, 0x12d, 0x139, 0x145, 0x152, 0x15f, 0x16c, 0x179, 0x186, 0x193, 0x1a0, 0x1ae, 0x1bb, 0x1c9, 0x1d6, 0x1e4, 0x1f1, 0x1ff, 0x20d, 0x21a, 0x228, 0x235, 0x243, 0x250, 0x25e, 0x26b, 0x278, 0x285, 0x292, 0x29f, 0x2ac, 0x2b9, 0x2c5, 0x2d1, 0x2dd, 0x2e9, 0x2f5, 0x300, 0x30b, 0x316, 0x321, 0x32c, 0x336, 0x340, 0x349, 0x353, 0x35c, 0x364, 0x36d, 0x375, 0x37d, 0x384, 0x38b, 0x392, 0x399, 0x39f, 0x3a4, 0x3aa, 0x3af, 0x3b3, 0x3b7, 0x3bb, 0x3be, 0x3c1, 0x3c4, 0x3c6, 0x3c8, 0x3ca, 0x3cb, 0x3cb, 0x3cb, 0x3cb, 0x3cb, 0x3ca, 0x3c8, 0x3c6, 0x3c4, 0x3c1, 0x3be, 0x3bb, 0x3b7, 0x3b3, 0x3af, 0x3aa, 0x3a4, 0x39f, 0x399, 0x392, 0x38b, 0x384, 0x37d, 0x375, 0x36d, 0x364, 0x35c, 0x353, 0x349, 0x340, 0x336, 0x32c, 0x321, 0x316, 0x30b, 0x300, 0x2f5, 0x2e9, 0x2dd, 0x2d1, 0x2c5, 0x2b9, 0x2ac, 0x29f, 0x292, 0x285, 0x278, 0x26b, 0x25e, 0x250, 0x243, 0x235, 0x228, 0x21a, 0x20d, 0x1ff, 0x1f1, 0x1e4, 0x1d6, 0x1c9, 0x1bb, 0x1ae, 0x1a0, 0x193, 0x186, 0x179, 0x16c, 0x15f, 0x152, 0x145, 0x139, 0x12d, 0x121, 0x115, 0x109, 0x0fe, 0x0f3, 0x0e8, 0x0dd, 0x0d2, 0x0c8, 0x0be, 0x0b5, 0x0ab, 0x0a2, 0x09a, 0x091, 0x089, 0x081, 0x07a, 0x073, 0x06c, 0x065, 0x05f, 0x05a, 0x054, 0x04f, 0x04b, 0x047, 0x043, 0x040, 0x03d, 0x03a, 0x038, 0x036, 0x034, 0x033, 0x033, 0x033}

	};
	struct fadeFunctionValues outputB = { // this are settings for LED 3 and 4
			.indx = 0,
			.length = 144, // 345 mHz = 2.899 s
			.brightness = {0x033, 0x033, 0x034, 0x037, 0x03a, 0x03e, 0x043, 0x048, 0x04f, 0x056, 0x05e, 0x067, 0x071, 0x07c, 0x087, 0x093, 0x0a0, 0x0ad, 0x0bb, 0x0ca, 0x0d9, 0x0e9, 0x0f9, 0x10a, 0x11c, 0x12e, 0x140, 0x152, 0x165, 0x178, 0x18c, 0x1a0, 0x1b3, 0x1c8, 0x1dc, 0x1f0, 0x204, 0x218, 0x22c, 0x241, 0x254, 0x268, 0x27c, 0x28f, 0x2a2, 0x2b5, 0x2c7, 0x2d9, 0x2eb, 0x2fc, 0x30d, 0x31d, 0x32c, 0x33b, 0x34a, 0x358, 0x365, 0x371, 0x37d, 0x388, 0x392, 0x39b, 0x3a4, 0x3ac, 0x3b3, 0x3b9, 0x3be, 0x3c2, 0x3c6, 0x3c9, 0x3ca, 0x3cb, 0x3cb, 0x3ca, 0x3c9, 0x3c6, 0x3c2, 0x3be, 0x3b9, 0x3b3, 0x3ac, 0x3a4, 0x39b, 0x392, 0x388, 0x37d, 0x371, 0x365, 0x358, 0x34a, 0x33b, 0x32c, 0x31d, 0x30d, 0x2fc, 0x2eb, 0x2d9, 0x2c7, 0x2b5, 0x2a2, 0x28f, 0x27c, 0x268, 0x254, 0x241, 0x22c, 0x218, 0x204, 0x1f0, 0x1dc, 0x1c8, 0x1b3, 0x1a0, 0x18c, 0x178, 0x165, 0x152, 0x140, 0x12e, 0x11c, 0x10a, 0x0f9, 0x0e9, 0x0d9, 0x0ca, 0x0bb, 0x0ad, 0x0a0, 0x093, 0x087, 0x07c, 0x071, 0x067, 0x05e, 0x056, 0x04f, 0x048, 0x043, 0x03e, 0x03a, 0x037, 0x034, 0x033, 0x033}
	};
	struct fadeFunctionValues outputC = { // this are settings for LED 5 and 6
			.indx = 0,
			.length = 109, // 456 mHz = 2.193 s
			.brightness = {0x033, 0x033, 0x036, 0x03a, 0x03f, 0x046, 0x04e, 0x058, 0x064, 0x070, 0x07e, 0x08e, 0x09e, 0x0b0, 0x0c3, 0x0d7, 0x0ec, 0x102, 0x119, 0x130, 0x149, 0x162, 0x17b, 0x195, 0x1af, 0x1ca, 0x1e4, 0x1ff, 0x21a, 0x234, 0x24f, 0x269, 0x283, 0x29c, 0x2b5, 0x2ce, 0x2e5, 0x2fc, 0x312, 0x327, 0x33b, 0x34e, 0x360, 0x370, 0x380, 0x38e, 0x39a, 0x3a6, 0x3b0, 0x3b8, 0x3bf, 0x3c4, 0x3c8, 0x3cb, 0x3cb, 0x3cb, 0x3c8, 0x3c4, 0x3bf, 0x3b8, 0x3b0, 0x3a6, 0x39a, 0x38e, 0x380, 0x370, 0x360, 0x34e, 0x33b, 0x327, 0x312, 0x2fc, 0x2e5, 0x2ce, 0x2b5, 0x29c, 0x283, 0x269, 0x24f, 0x234, 0x21a, 0x1ff, 0x1e4, 0x1ca, 0x1af, 0x195, 0x17b, 0x162, 0x149, 0x130, 0x119, 0x102, 0x0ec, 0x0d7, 0x0c3, 0x0b0, 0x09e, 0x08e, 0x07e, 0x070, 0x064, 0x058, 0x04e, 0x046, 0x03f, 0x03a, 0x036, 0x033, 0x033}
	};
	struct fadeFunctionValues outputD = { // this are settings for LED 7 and 8
			.indx = 0,
			.length = 406, // 123 mHz = 8.130 s
			.brightness = {0x033, 0x033, 0x033, 0x033, 0x034, 0x034, 0x035, 0x035, 0x036, 0x037, 0x038, 0x039, 0x03b, 0x03c, 0x03d, 0x03f, 0x041, 0x043, 0x044, 0x047, 0x049, 0x04b, 0x04d, 0x050, 0x052, 0x055, 0x058, 0x05a, 0x05d, 0x060, 0x064, 0x067, 0x06a, 0x06e, 0x071, 0x075, 0x079, 0x07c, 0x080, 0x084, 0x088, 0x08d, 0x091, 0x095, 0x09a, 0x09e, 0x0a3, 0x0a8, 0x0ad, 0x0b1, 0x0b6, 0x0bb, 0x0c1, 0x0c6, 0x0cb, 0x0d0, 0x0d6, 0x0db, 0x0e1, 0x0e6, 0x0ec, 0x0f2, 0x0f8, 0x0fe, 0x104, 0x10a, 0x110, 0x116, 0x11c, 0x122, 0x128, 0x12f, 0x135, 0x13c, 0x142, 0x149, 0x14f, 0x156, 0x15d, 0x163, 0x16a, 0x171, 0x178, 0x17e, 0x185, 0x18c, 0x193, 0x19a, 0x1a1, 0x1a8, 0x1af, 0x1b6, 0x1bd, 0x1c4, 0x1cb, 0x1d2, 0x1da, 0x1e1, 0x1e8, 0x1ef, 0x1f6, 0x1fd, 0x204, 0x20b, 0x213, 0x21a, 0x221, 0x228, 0x22f, 0x236, 0x23d, 0x244, 0x24b, 0x252, 0x259, 0x260, 0x267, 0x26e, 0x275, 0x27c, 0x283, 0x28a, 0x291, 0x297, 0x29e, 0x2a5, 0x2ab, 0x2b2, 0x2b9, 0x2bf, 0x2c6, 0x2cc, 0x2d2, 0x2d9, 0x2df, 0x2e5, 0x2eb, 0x2f1, 0x2f7, 0x2fd, 0x303, 0x309, 0x30f, 0x315, 0x31a, 0x320, 0x326, 0x32b, 0x330, 0x336, 0x33b, 0x340, 0x345, 0x34a, 0x34f, 0x354, 0x359, 0x35d, 0x362, 0x366, 0x36b, 0x36f, 0x373, 0x378, 0x37c, 0x380, 0x383, 0x387, 0x38b, 0x38f, 0x392, 0x395, 0x399, 0x39c, 0x39f, 0x3a2, 0x3a5, 0x3a8, 0x3aa, 0x3ad, 0x3b0, 0x3b2, 0x3b4, 0x3b6, 0x3b9, 0x3ba, 0x3bc, 0x3be, 0x3c0, 0x3c1, 0x3c3, 0x3c4, 0x3c5, 0x3c6, 0x3c7, 0x3c8, 0x3c9, 0x3ca, 0x3ca, 0x3cb, 0x3cb, 0x3cb, 0x3cb, 0x3cb, 0x3cb, 0x3cb, 0x3cb, 0x3ca, 0x3ca, 0x3c9, 0x3c8, 0x3c7, 0x3c6, 0x3c5, 0x3c4, 0x3c3, 0x3c1, 0x3c0, 0x3be, 0x3bc, 0x3ba, 0x3b9, 0x3b6, 0x3b4, 0x3b2, 0x3b0, 0x3ad, 0x3aa, 0x3a8, 0x3a5, 0x3a2, 0x39f, 0x39c, 0x399, 0x395, 0x392, 0x38f, 0x38b, 0x387, 0x383, 0x380, 0x37c, 0x378, 0x373, 0x36f, 0x36b, 0x366, 0x362, 0x35d, 0x359, 0x354, 0x34f, 0x34a, 0x345, 0x340, 0x33b, 0x336, 0x330, 0x32b, 0x326, 0x320, 0x31a, 0x315, 0x30f, 0x309, 0x303, 0x2fd, 0x2f7, 0x2f1, 0x2eb, 0x2e5, 0x2df, 0x2d9, 0x2d2, 0x2cc, 0x2c6, 0x2bf, 0x2b9, 0x2b2, 0x2ab, 0x2a5, 0x29e, 0x297, 0x291, 0x28a, 0x283, 0x27c, 0x275, 0x26e, 0x267, 0x260, 0x259, 0x252, 0x24b, 0x244, 0x23d, 0x236, 0x22f, 0x228, 0x221, 0x21a, 0x213, 0x20b, 0x204, 0x1fd, 0x1f6, 0x1ef, 0x1e8, 0x1e1, 0x1da, 0x1d2, 0x1cb, 0x1c4, 0x1bd, 0x1b6, 0x1af, 0x1a8, 0x1a1, 0x19a, 0x193, 0x18c, 0x185, 0x17e, 0x178, 0x171, 0x16a, 0x163, 0x15d, 0x156, 0x14f, 0x149, 0x142, 0x13c, 0x135, 0x12f, 0x128, 0x122, 0x11c, 0x116, 0x110, 0x10a, 0x104, 0x0fe, 0x0f8, 0x0f2, 0x0ec, 0x0e6, 0x0e1, 0x0db, 0x0d6, 0x0d0, 0x0cb, 0x0c6, 0x0c1, 0x0bb, 0x0b6, 0x0b1, 0x0ad, 0x0a8, 0x0a3, 0x09e, 0x09a, 0x095, 0x091, 0x08d, 0x088, 0x084, 0x080, 0x07c, 0x079, 0x075, 0x071, 0x06e, 0x06a, 0x067, 0x064, 0x060, 0x05d, 0x05a, 0x058, 0x055, 0x052, 0x050, 0x04d, 0x04b, 0x049, 0x047, 0x044, 0x043, 0x041, 0x03f, 0x03d, 0x03c, 0x03b, 0x039, 0x038, 0x037, 0x036, 0x035, 0x035, 0x034, 0x034, 0x033, 0x033, 0x033, 0x033}
	};
/* USER CODE END PV */

/* Private function prototypes -----------------------------------------------*/
/* USER CODE BEGIN PFP */

/* USER CODE END PFP */

/* Private user code ---------------------------------------------------------*/
/* USER CODE BEGIN 0 */

/* USER CODE END 0 */

/* External variables --------------------------------------------------------*/
extern TIM_HandleTypeDef htim3;
/* USER CODE BEGIN EV */

/* USER CODE END EV */

/******************************************************************************/
/*           Cortex Processor Interruption and Exception Handlers          */
/******************************************************************************/
/**
  * @brief This function handles Non maskable interrupt.
  */
void NMI_Handler(void)
{
  /* USER CODE BEGIN NonMaskableInt_IRQn 0 */

  /* USER CODE END NonMaskableInt_IRQn 0 */
  /* USER CODE BEGIN NonMaskableInt_IRQn 1 */
   while (1)
  {
  }
  /* USER CODE END NonMaskableInt_IRQn 1 */
}

/**
  * @brief This function handles Hard fault interrupt.
  */
void HardFault_Handler(void)
{
  /* USER CODE BEGIN HardFault_IRQn 0 */

  /* USER CODE END HardFault_IRQn 0 */
  while (1)
  {
    /* USER CODE BEGIN W1_HardFault_IRQn 0 */
    /* USER CODE END W1_HardFault_IRQn 0 */
  }
}

/**
  * @brief This function handles System service call via SWI instruction.
  */
void SVC_Handler(void)
{
  /* USER CODE BEGIN SVC_IRQn 0 */

  /* USER CODE END SVC_IRQn 0 */
  /* USER CODE BEGIN SVC_IRQn 1 */

  /* USER CODE END SVC_IRQn 1 */
}

/**
  * @brief This function handles Pendable request for system service.
  */
void PendSV_Handler(void)
{
  /* USER CODE BEGIN PendSV_IRQn 0 */

  /* USER CODE END PendSV_IRQn 0 */
  /* USER CODE BEGIN PendSV_IRQn 1 */

  /* USER CODE END PendSV_IRQn 1 */
}

/**
  * @brief This function handles System tick timer.
  */
void SysTick_Handler(void)
{
  /* USER CODE BEGIN SysTick_IRQn 0 */

  /* USER CODE END SysTick_IRQn 0 */
  HAL_IncTick();
  /* USER CODE BEGIN SysTick_IRQn 1 */

  /* USER CODE END SysTick_IRQn 1 */
}

/******************************************************************************/
/* STM32C0xx Peripheral Interrupt Handlers                                    */
/* Add here the Interrupt Handlers for the used peripherals.                  */
/* For the available peripheral interrupt handler names,                      */
/* please refer to the startup file (startup_stm32c0xx.s).                    */
/******************************************************************************/

/**
  * @brief This function handles TIM3 global interrupt.
  */
void TIM3_IRQHandler(void)
{
  /* USER CODE BEGIN TIM3_IRQn 0 */
	// IMPORTANT!!! Use 'HAL_TIM_Base_Start_IT(&htim3);' in 'main.c' !!!
	TIM1->CCR1 = outputA.brightness[outputA.indx]; // set brightness for LEDs 1 and 2
	outputA.indx++; // increase for next value in LED brightness sequence
	if (outputA.indx >= outputA.length) // if end of sequence of LED brightnesses is reached, reset index
	{
		outputA.indx = 0;
	}
	//************************************************************************
	sftwrBrightness = outputB.brightness[outputB.indx]; // set brightness for LEDs 3 and 4
	outputB.indx++; // increase for next value in LED brightness sequence
	if (outputB.indx >= outputB.length) // if end of sequence of LED brightnesses is reached, reset index
	{
		outputB.indx = 0;
	}
	//************************************************************************
	TIM1->CCR4 = outputC.brightness[outputC.indx]; // set brightness for LEDs 5 and 6
	outputC.indx++; // increase for next value in LED brightness sequence
	if (outputC.indx >= outputC.length) // if end of sequence of LED brightnesses is reached, reset index
	{
		outputC.indx = 0;
	}
	//************************************************************************
	TIM1->CCR2 = outputD.brightness[outputD.indx]; // set brightness for LEDs 7 and 8
	outputD.indx++; // increase for next value in LED brightness sequence
	if (outputD.indx >= outputD.length) // if end of sequence of LED brightnesses is reached, reset index
	{
		outputD.indx = 0;
	}
	//************************************************************************
	//************************************************************************
	//************************************************************************
	// FOLLOWING: For DEBUG
	// if (updown == 1)
	// {
	// 	if (sftwrBrightness <= 1023)
	// 	{
	// 		sftwrBrightness = sftwrBrightness + 10;
	// 	}
	// 	else
	// 	{
	// 		updown = 0;
	// 	}
	// }
	//
	// if (updown == 0)
	// {
	// 	if (sftwrBrightness > 0)
	// 	{
	// 		sftwrBrightness = sftwrBrightness - 10;
	// 	}
	// 	else
	// 	{
	// 		updown = 1;
	// 	}
	// }
  /* USER CODE END TIM3_IRQn 0 */
  HAL_TIM_IRQHandler(&htim3);
  /* USER CODE BEGIN TIM3_IRQn 1 */

  /* USER CODE END TIM3_IRQn 1 */
}

/* USER CODE BEGIN 1 */

/* USER CODE END 1 */
